<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Tailscale on Taiki M.</title>
    <link>https://mazmr.com/tags/tailscale/</link>
    <description>Recent content in Tailscale on Taiki M.</description>
    <generator>Hugo</generator>
    <language>ja</language>
    <lastBuildDate>Sun, 20 Apr 2025 20:24:47 +0900</lastBuildDate>
    <atom:link href="https://mazmr.com/tags/tailscale/atom.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Setting up an exit node for LAN resource access with Docker compose</title>
      <link>https://mazmr.com/posts/tailscale_exit-node_lan-access/</link>
      <pubDate>Sun, 20 Apr 2025 20:24:47 +0900</pubDate>
      <guid>https://mazmr.com/posts/tailscale_exit-node_lan-access/</guid>
      <description>&lt;ol&gt;&#xA;&lt;li&gt;wrote this docker compose&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;services&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;tailscale&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;image&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;tailscale/tailscale:latest&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;hostname&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;chibi-exitnode&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;environment&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - &lt;span style=&#34;color:#ae81ff&#34;&gt;TS_AUTHKEY=tskey-auth-redacted&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - &lt;span style=&#34;color:#ae81ff&#34;&gt;TS_EXTRA_ARGS=--advertise-exit-node --advertise-routes=10.7.22.0/24 &lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - &lt;span style=&#34;color:#ae81ff&#34;&gt;TS_STATE_DIR=/var/lib/tailscale&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - &lt;span style=&#34;color:#ae81ff&#34;&gt;TS_USERSPACE=false&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;volumes&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        - &lt;span style=&#34;color:#ae81ff&#34;&gt;./tailscale-client/state:/var/lib/tailscale&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;devices&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - &lt;span style=&#34;color:#ae81ff&#34;&gt;/dev/net/tun:/dev/net/tun&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;cap_add&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - &lt;span style=&#34;color:#ae81ff&#34;&gt;net_admin&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;restart&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;unless-stopped&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;sysctls&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - &lt;span style=&#34;color:#ae81ff&#34;&gt;net.ipv4.ip_forward=1&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;hostname: your-hostname-for-exitnode&lt;/code&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;can be anything&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;TS_AUTHKEY=&lt;/code&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;put your tailscale auth key here&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;TS_EXTRA_ARGS=--advertise-exit-node --advertise-routes=192.168.1.0/24&lt;/code&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;you need to use your own subnet instead of mine (192.168.1.0/24)&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;docker compose up -d&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;head to the tailscale web UI (&lt;a href=&#34;https://login.tailscale.com&#34;&gt;login.tailscale.com&lt;/a&gt;)&lt;/li&gt;&#xA;&lt;li&gt;in &amp;lsquo;Machines&amp;rsquo; section, look for &amp;lsquo;chibi-exitnode&amp;rsquo; and click it&lt;/li&gt;&#xA;&lt;li&gt;Under &amp;lsquo;Routing Settings&amp;rsquo; section, you&amp;rsquo;ll see &amp;lsquo;Exit node&amp;rsquo;. Click edit and &amp;lsquo;Allow&amp;rsquo; and make sure &amp;lsquo;Use as exit node&amp;rsquo; checkbox is ticked.&lt;/li&gt;&#xA;&lt;li&gt;Under &amp;lsquo;Subnets&amp;rsquo; section, you&amp;rsquo;ll see awaiting approval.  so click edit and &amp;lsquo;Approve&amp;rsquo;&lt;/li&gt;&#xA;&lt;li&gt;On your phone&amp;rsquo;s tailscale client, you see &amp;lsquo;EXIT NODE None&amp;rsquo; on the top. Tap it and select &amp;lsquo;chibi-exitnode&amp;rsquo;&lt;/li&gt;&#xA;&lt;/ol&gt;</description>
    </item>
  </channel>
</rss>
